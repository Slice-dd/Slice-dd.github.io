webpackJsonp([6],{KvDg:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a("mNLB"),a("sRCy")),s=l(n),r=(a("4yHo"),a("uuhB")),u=l(r),d=(a("du7Z"),a("IidI")),i=l(d),o=a("Dd8w"),f=l(o),m=a("Zx67"),c=l(m),p=a("Zrlr"),h=l(p),D=a("wxAW"),b=l(D),E=a("zwoO"),v=l(E),g=a("Pf15"),y=l(g),w=(a("RWXa"),a("NJOH")),H=l(w),T=(a("onAH"),a("37+n")),Y=l(T),C=a("U7vG"),M=l(C),N=a("PwNh"),R=l(N),I=a("F8kA"),k=a("PJh5"),x=l(k),S=a("mf7v"),F=a("RH2O"),V=a("mw3O"),_=(l(V),Y.default.Item),q=(Y.default.Item,H.default.Option,function(e){function t(e){(0,h.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.changeTime=function(e,t){var l={},n={};""!=e&&(l=(0,x.default)(e,"YYYY-MM-DD HH:mm")),""!=t&&(n=(0,x.default)(t,"YYYY-MM-DD HH:mm")),a.setState({sendDate:l,returnDate:n})},a.formatDate=function(e,t){var l=new Date(e),n=new Date(t);return(0,f.default)({sendDate:l.getFullYear()+"-"+a.formatTen(l.getMonth()+1)+"-"+a.formatTen(l.getDate())+" "+a.formatTen(l.getHours())+":"+a.formatTen(l.getMinutes())},{returnDate:n.getFullYear()+"-"+a.formatTen(n.getMonth()+1)+"-"+a.formatTen(n.getDate())+" "+a.formatTen(n.getHours())+":"+a.formatTen(n.getMinutes())})},a.formatTen=function(e){return e>9?e+"":"0"+e},a.disabledDateTime=function(){return{disabledSeconds:function(){return a.range(1,60)}}},a.range=function(e,t){for(var a=[],l=e;l<t;l++)a.push(l);return a},a.state={isEmpty:!0,destination:"",sendDate:null,returnDate:null,peopleNumber:"",sendReson:"",sendCarId:""},a}return(0,y.default)(t,e),(0,b.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.location.query;if(void 0!==e){var t=e.record;this.setState({name:t.reqName,destination:t.destination,peopleNumber:t.peopleNumber,sendReson:t.sendReson,sendCarId:t.sendCarId}),this.changeTime(t.sendDate,t.returnDate)}else console.log("into else："),this.setState({isEmpty:!1,sendDate:null,returnDate:null})}},{key:"handleReset",value:function(e){e.preventDefault(),this.props.form.resetFields(),this.setState({destination:"",sendDate:null,returnDate:null,peopleNumber:"",sendReson:""})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){if(e)return void console.log("Errors in form!!!");var l=a,n=t.formatDate(a.sendDate,a.returnDate);l=(0,f.default)({},l,{sendCarId:t.state.sendCarId},n);var s=t.props,r=s.dispatch,u=s.history;r((0,S.busSave)(l,u))})}},{key:"render",value:function(){var e=this.props.user,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:7}}},l={initialValue:this.state.sendDate,rules:[{type:"object",required:!0,message:"请选择出发时间!"}]},n={initialValue:this.state.returnDate,rules:[{type:"object",required:!0,message:"请选择返回时间!"}]},r=M.default.createElement("div",{span:!0,style:{margin:"0 auto",textAlign:"center"}},this.state.isEmpty?M.default.createElement("span",null):M.default.createElement("span",{style:{color:"red",fontSize:15}},"页面失效，请重新进入!"));return M.default.createElement("div",null,M.default.createElement("div",{className:R.default.back},M.default.createElement(i.default,null,M.default.createElement(I.Link,{to:"Bus"},"返回"))),M.default.createElement("div",{className:R.default.data},M.default.createElement("div",null,r),M.default.createElement(Y.default,null,M.default.createElement(_,(0,f.default)({},a,{label:"流程说明："}),M.default.createElement("p",null,"如对派车安排有任何疑问，金立通信同事请电话咨询行政部马子健。马子健电话：13827417798",M.default.createElement("br",null),"海外事业部及电商事业部同事请电话咨询石建东。石建东电话：13828855520")),M.default.createElement(_,(0,f.default)({},a,{label:"申请人："}),M.default.createElement("span",null,e.empNm)),M.default.createElement(_,(0,f.default)({},a,{label:"目的地："}),t("destination",{initialValue:this.state.destination,rules:[{required:!0,message:"请输入目的地!"}]})(M.default.createElement(u.default,{placeholder:"目的地",style:{width:160}}))),M.default.createElement(_,(0,f.default)({},a,{label:"发车时间："}),t("sendDate",l)(M.default.createElement(s.default,{showTime:{defaultValue:(0,x.default)("09:00:00","HH:mm:ss")},disabledTime:this.disabledDateTime,format:"YYYY-MM-DD HH:mm:ss",style:{width:160}}))),M.default.createElement(_,(0,f.default)({},a,{label:"返回时间："}),t("returnDate",n)(M.default.createElement(s.default,{showTime:{defaultValue:(0,x.default)("18:00:00","HH:mm:ss")},disabledTime:this.disabledDateTime,format:"YYYY-MM-DD HH:mm:ss",style:{width:160}}))),M.default.createElement(_,(0,f.default)({},a,{label:"人数："}),t("peopleNumber",{initialValue:this.state.peopleNumber,rules:[{required:!0,message:"请输入乘车人数!"}]})(M.default.createElement(u.default,{placeholder:"乘车人数",style:{width:160}}))),M.default.createElement(_,{labelCol:{xs:{span:4},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:6}},label:"派车事由："},t("reason",{initialValue:this.state.sendReson,rules:[{required:!0,message:"真的不打算写点什么吗？"}]})(M.default.createElement(u.default,{type:"textarea",placeholder:"出差事由",autosize:{minRows:4,maxRows:9}}))),t("sendCarId",{initialValue:this.state.sendCarId})(M.default.createElement(u.default,{type:"hidden"})),M.default.createElement(_,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:3}}},M.default.createElement(i.default,{type:"ghost",onClick:this.handleReset.bind(this)},"重置"),"         ",M.default.createElement(i.default,{type:"primary",onClick:this.handleSubmit.bind(this)},"确定")))))}}]),t}(C.Component)),O=function(e){var t=e.bus,a=e.user;return{isFetching:t.isFetching,user:a}};t.default=(0,F.connect)(O)(Y.default.create()(q))}});