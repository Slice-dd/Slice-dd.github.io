webpackJsonp([3],{D2Fh:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a("U7vG"),r=l(n),u=a("MEjW"),d=l(u),o=function(e,t){return function(a){var l="DIV"==a.target.tagName?a.target:a.target.parentNode,n=l.parentNode.childNodes;if(l.style.background)l.style.background="",l.style.color="",t();else{for(var r=0;r<n.length;r++)n[r].style.background="",n[r].style.color="";l.style.background="rgba(134, 134, 134, 1)",l.style.color="#fff",e()}}},c=function(e){var t=e.name,a=e.number,l=e.onClick,n=e.clear;return r.default.createElement("div",{className:d.default.bigtag,onClick:o(l,n)},r.default.createElement("span",{style:{fontSize:28}},a),r.default.createElement("br",null),r.default.createElement("span",null,t))};t.default=c},DwWG:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FormSelect=void 0;var n=a("Zx67"),r=l(n),u=a("Zrlr"),d=l(u),o=a("wxAW"),c=l(o),s=a("zwoO"),f=l(s),i=a("Pf15"),m=l(i),p=(a("RWXa"),a("NJOH")),h=l(p),y=a("U7vG"),E=l(y),v=a("PJh5"),g=l(v);a("Vz2w");var b=a("KSGD"),_=(l(b),a("y0gv")),D=l(_),C=a("maD1"),k=l(C),S=(a("RH2O"),a("Tqry")),T=(l(S),a("2zTs")),A=a("ptnp");g.default.locale("zh-cn");var w=h.default.Option,P=(t.FormSelect=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleChange=function(e){(0,a.props.onChange)(e)},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.style,a=e.className,l=e.placeholder,n=e.data,r=n.map(function(e,t){return E.default.createElement(w,{key:t,value:e.value},e.name)});return E.default.createElement(h.default,{allowClear:!0,style:t,className:a,placeholder:l},E.default.createElement(w,{key:0,value:""},l),r)}}]),t}(y.PureComponent),[{value:"1",name:"正常"},{value:"2",name:"迟到"},{value:"3",name:"迟到(>2次)"},{value:"4",name:"缺勤"},{value:"5",name:"早退"},{value:"6",name:"旷工"},{value:"7",name:"请假"},{value:"8",name:"出差"},{value:"10",name:"打卡正常"},{value:"20",name:"忘记带卡"},{value:"21",name:"忘记打卡"}]),N=[{spanNum:"15",label:"",name:"time",ele:E.default.createElement(k.default,{defaultStartDate:(0,g.default)().startOf("month"),defaultEndDate:(0,g.default)(),style:{marginTop:16},startPlaceholder:"请假开始日期",endPlaceholder:"请假结束日期"})},{spanNum:"10",label:"",name:"onStatus",ele:E.default.createElement(h.default,{placeholder:"上班状态",style:{width:120,marginTop:14,marginLeft:-24},allowClear:!0},P.map(function(e){return E.default.createElement(w,{key:e.value,value:""+e.value},e.name)}))},{spanNum:"10",label:"",name:"offStatus",ele:E.default.createElement(h.default,{placeholder:"下班状态",style:{width:120,marginTop:14},allowClear:!0},P.map(function(e){return E.default.createElement(w,{key:e.value,value:""+e.value},e.name)}))}],O=[],M=function(e){function t(){var e,a,l,n;(0,d.default)(this,t);for(var u=arguments.length,o=Array(u),c=0;c<u;c++)o[c]=arguments[c];return a=l=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),l.handleSearch=function(e){var t=l.props.dispatch;if(e.onStatus||e.offStatus){e.statusAll=null;for(var a=document.getElementById("attendance-tag").childNodes,n=0;n<a.length;n++)a[n].style.background="",a[n].style.color="rgba(0, 0, 0, 0.65)"}t((0,A.sendAttendanceData)(t((0,A.attendanceSearchData)((0,T.convertObj)(e)))))},l.clearOnAndOffStatus=function(){l.sf&&l.sf.getForm().resetFields(["onStatus"])},n=a,(0,f.default)(l,n)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this;return E.default.createElement(D.default,{ref:function(t){return e.sf=t},btnStyle:{marginTop:13},childrens:N,hideChildrens:O,handleSearch:this.handleSearch})}}]),t}(y.Component);t.default=M},GfIs:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a("mNLB"),a("sRCy")),r=l(n),u=a("Dd8w"),d=l(u),o=(a("du7Z"),a("IidI")),c=l(o),s=a("Zx67"),f=l(s),i=a("Zrlr"),m=l(i),p=a("wxAW"),h=l(p),y=a("zwoO"),E=l(y),v=a("Pf15"),g=l(v),b=(a("4yHo"),a("uuhB")),_=l(b),D=(a("RWXa"),a("NJOH")),C=l(D),k=(a("onAH"),a("37+n")),S=l(k),T=a("U7vG"),A=l(T),w=(a("F8kA"),a("RH2O")),P=a("PJh5"),N=l(P),O=(a("hxne"),a("ptnp")),M=a("r6vE"),R=a("Tqry"),Y=l(R),I=S.default.Item,x=C.default.Option,F=_.default.TextArea,q={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:7}}},z=function(e){function t(e){(0,m.default)(this,t);var a=(0,E.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleSubmit=function(e){var t=a.props,l=t.dispatch,n=t.history,r=t.form;e.preventDefault(),r.validateFields(function(e,t){if(!e){a.setState({submiting:!0});var r=t;r.startDate=r.startDate.format("YYYYMMDD"),l((0,O.postNewUnnormal)(t,n,function(){return a.setState({submiting:!1})}))}})},a.state={name:null,date:null,submiting:!1},a}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.location.query;if(this.props.history,e&&e.record&&e.disposeType){var t=e.record,a=e.disposeType;this.setState({disposeType:a,date:t.attendanceDate})}}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.history,l=this.state;return l.disposeType,l.date,A.default.createElement("div",null,A.default.createElement("div",{className:"eoa-search"},A.default.createElement(c.default,{onClick:function(){return a.goBack()}},"返回")),A.default.createElement("div",{className:"eoa-data"},A.default.createElement(S.default,null,A.default.createElement(I,(0,d.default)({},q,{label:"流程说明："}),A.default.createElement("div",null,A.default.createElement("p",null,"1.申请延时不超过两个工作日"),A.default.createElement("p",null,"2.请假（尤其是旅游假）,出差不得在考勤异常证明中填写忘记打卡或者忘记带卡"),A.default.createElement("p",null,"3.不可抗力因素导致的无法打卡（如忘记打卡）需同时在前台和OA系统登记，如无前台登记的上下班记录则视为忘记打卡"))),A.default.createElement(I,(0,d.default)({},q,{label:"申请人"}),this.props.user.empNm),A.default.createElement(I,(0,d.default)({},q,{label:"上班/下班"}),t.getFieldDecorator("excepTypId",{initialValue:this.state.disposeType,rules:[{required:!0,message:"请选择上班/下班!"}]})(A.default.createElement(C.default,{style:{width:180},placeholder:"请选择类型"},A.default.createElement(x,{value:M.RECARD_EXCEPTYPID_ON},"上班"),A.default.createElement(x,{value:M.RECARD_EXCEPTYPID_OFF},"下班")))),A.default.createElement(I,(0,d.default)({},q,{label:"异常类型"}),t.getFieldDecorator("excepType",{initialValue:M.RECARD_EXCEPTYPE_FORGET,rules:[{required:!0,message:"请选择异常类型!"}]})(A.default.createElement(C.default,{style:{width:180},placeholder:"请选择异常类型"},A.default.createElement(x,{value:M.RECARD_EXCEPTYPE_FORGET},"忘记打卡")))),A.default.createElement(I,(0,d.default)({},q,{label:"日期"}),t.getFieldDecorator("startDate",{initialValue:(0,N.default)(this.state.date?this.state.date:new Date,"YYYY-MM-DD"),rules:[{required:!0,message:"请选择日期!"}]})(A.default.createElement(r.default,{format:"YYYY-MM-DD"}))),A.default.createElement(I,(0,d.default)({},q,{label:"原因"}),t.getFieldDecorator("remark",{rules:[{required:!0,message:"请输入原因!"}]})(A.default.createElement(F,{style:{width:280,height:100}}))),A.default.createElement(I,{wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:3}}},A.default.createElement(c.default,{loading:this.state.submiting,type:"primary",onClick:this.handleSubmit,htmlType:"submit"},"提交"),A.default.createElement(c.default,{className:Y.default.cancelBtn,onClick:this.goBack},"取消")))))}}]),t}(T.Component),L=function(e){return{user:e.user}};t.default=(0,w.connect)(L)(S.default.create()(z))},MEjW:function(e,t){e.exports={bigtag:"_1SwwjmXd4KecASOnpCKkBQ",bigtag_hover:"_2qZbHL74t83_dTCA_Ymgb1",bigtagClick:"_3tvcw_7BfPAm4BS-N5IIM9"}},Tqry:function(e,t){e.exports={startTimeWarp:"_3xP6i3yKsMUqlHNIPJ3HkA",endTimeWarp:"_1uQyzTgfgXnvAP0zeQ_vua",dateSeparate:"_22GSxss52YXX2tZc6PZDfZ",datePicker:"_5nCBrJyKzUf8fex24pE1d",datePickerAdon:"_3TyoC6qLzikaMtc0WPADJ6",table:"_1hoh1C_paL5AJfXJpDwxjh",pagewarp:"CcUTtLookiSlq_eltky57",offDutyState:"_152zgsVy1Pyzfm74HwP_je",workState:"_1fgnxZxL3SyHJhyC2YRSG5",searchBtn:"_1o01EqYr0mtnvRafIIQfbC",tagWarp:"_2Vctl3ASXe8fUSwmkKyDwF",cancelBtn:"_2FIvI5pN5EnH2cYNYFFbgC"}},pnlf:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(){var e=this;return[{title:"出勤日期",dataIndex:"attendanceDate",key:"attendanceDate"},{title:"类型",dataIndex:"attendanceTypeName",key:"attendanceTypeName"},{title:"上班打卡时间",dataIndex:"onDate",key:"onDate"},{title:"下班打卡时间",dataIndex:"offDate",key:"offDate"},{title:"操作",dataIndex:"action",key:"action",render:function(t,a){return Z=a,H(a.onStatus)&&0==a.onType&&H(a.offStatus)&&0==a.offType?N.default.createElement("span",null,N.default.createElement("a",{onClick:e.showModal.bind(e,W.RECARD_EXCEPTYPID_ON,a)},"上班处理"),"  ",N.default.createElement("a",{onClick:e.showModal.bind(e,W.RECARD_EXCEPTYPID_OFF,a)},"下班处理")):H(a.onStatus)&&0==a.onType?N.default.createElement("span",null,N.default.createElement("a",{onClick:e.showModal.bind(e,W.RECARD_EXCEPTYPID_ON,a)},"上班处理")):H(a.offStatus)&&0==a.offType?N.default.createElement("span",null,N.default.createElement("a",{onClick:e.showModal.bind(e,W.RECARD_EXCEPTYPID_OFF,a)},"下班处理")):null}}]}Object.defineProperty(t,"__esModule",{value:!0});var r=(a("q+ng"),a("VgYS")),u=l(r),d=(a("Zjie"),a("yF52")),o=l(d),c=(a("Y2f6"),a("vaID")),s=l(c),f=(a("du7Z"),a("IidI")),i=l(f),m=a("Zx67"),p=l(m),h=a("Zrlr"),y=l(h),E=a("wxAW"),v=l(E),g=a("zwoO"),b=l(g),_=a("Pf15"),D=l(_),C=(a("4yHo"),a("uuhB")),k=l(C),S=(a("ZYVT"),a("PoSO")),T=l(S),A=(a("RWXa"),a("NJOH")),w=l(A),P=a("U7vG"),N=l(P),O=a("RH2O"),M=a("F8kA"),R=a("D2Fh"),Y=l(R),I=a("Tqry"),x=l(I),F=a("PwNh"),q=l(F),z=a("DwWG"),L=l(z),X=a("ptnp"),W=a("r6vE"),H=(w.default.Option,T.default.Group,k.default.Group,function(e){return!(1==e||2==e||7==e||8==e||10==e||20==e||21==e)}),U=1,Z=null,G={exption:0,absence:0,late:0,unregist:0,earlyLeave:0},B=function(e){function t(e){(0,y.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.showModal=function(e,t){a.setState({visible:!0,disposeType:e,record:t})},a.hideModal=function(){a.setState({visible:!1})},a.doDispose=function(){switch(U){case 1:a.props.history.push("Unnormal");break;case 2:a.props.history.push("AddLeave");break;case 3:a.props.history.push("AddTrip")}},a.pageUp=function(e,t){var l=a.props.dispatch;l((0,X.sendAttendanceData)(l((0,X.attendanceSearchData)({page:e,pagesize:t}))))},a.fetchAbnormal=function(e){var t=a.props.dispatch;t((0,X.sendAttendanceData)(t((0,X.attendanceSearchData)({statusAll:e,onStatus:null,offStatus:null})))),e&&a.search.clearOnAndOffStatus()},a.state={visible:!1,valueMap:null,changeValue:null},a}return(0,D.default)(t,e),(0,v.default)(t,[{key:"shouldComponentUpdate",value:function(e){return e.attendanceData.isRefreshing}},{key:"componentWillMount",value:function(){(0,this.props.dispatch)((0,X.sendAttendanceData)())}},{key:"render",value:function(){var e=this,t=this.props,a=t.attendanceData,l=t.dispatch,r=a.data&&a.data.summary?a.data.summary:G,d=r.exption,c=r.absence,f=r.late,m=r.unregist,p=r.earlyLeave,h=this.state,y=h.record,E=h.disposeType;return h.valueMap,h.onStatus,h.offStatus,N.default.createElement("div",{className:q.default.body},N.default.createElement(s.default,{title:this.state.disposeType==W.RECARD_EXCEPTYPID_ON?"上班处理":"下班处理",visible:this.state.visible,onCancel:this.hideModal,footer:N.default.createElement("div",null,N.default.createElement(M.Link,{style:{display:"inline-block"},to:{pathname:"Unnormal",query:{record:y,disposeType:E}}},N.default.createElement(i.default,{type:"primary"},"异常考勤证明")),N.default.createElement(M.Link,{style:{display:"inline-block",marginLeft:10},to:{pathname:"addTrip",query:{record:y,disposeType:E}}},N.default.createElement(i.default,{type:"primary"},"出差申请")),N.default.createElement(M.Link,{style:{display:"inline-block",marginLeft:10},to:{pathname:"addLeave",query:{record:y,disposeType:E}}},N.default.createElement(i.default,{type:"primary"},"请假")))},N.default.createElement("p",null,"异常考勤证明：填写异常考勤证明"),N.default.createElement("p",null,"出差申请：填写出差申请"),N.default.createElement("p",null,"请假：填写请假申请")),N.default.createElement("div",{className:"eoa-search",style:{height:80,marginLeft:0}},N.default.createElement(L.default,{ref:function(t){return e.search=t},dispatch:l,changeValue:this.state.changeValue})),N.default.createElement("div",{className:"eoa-data",style:{marginLeft:0}},N.default.createElement("div",{id:"attendance-tag",className:x.default.tagWarp},N.default.createElement(Y.default,{name:"缺勤",number:c,clear:function(){return e.fetchAbnormal(null)},onClick:function(){return e.fetchAbnormal(7)}}),N.default.createElement(Y.default,{name:"迟到",number:f,clear:function(){return e.fetchAbnormal(null)},onClick:function(){return e.fetchAbnormal(5)}}),N.default.createElement(Y.default,{name:"忘记打卡",number:d,clear:function(){return e.fetchAbnormal(null)},onClick:function(){return e.fetchAbnormal(3)}}),N.default.createElement(Y.default,{name:"早退",number:p,clear:function(){return e.fetchAbnormal(null)},onClick:function(){return e.fetchAbnormal(8)}}),N.default.createElement(Y.default,{name:"旷工",number:m,clear:function(){return e.fetchAbnormal(null)},onClick:function(){return e.fetchAbnormal(9)}})),N.default.createElement(o.default,{loading:a.isFetching,className:x.default.table,pagination:!1,dataSource:a.data.rows,columns:n.apply(this)}),N.default.createElement("div",{className:x.default.pagewarp},N.default.createElement(u.default,{showSizeChanger:!0,onShowSizeChange:this.pageUp,showQuickJumper:!0,onChange:this.pageUp,defaultCurrent:a.page,defaultPageSize:a.pageSize,total:a.total}))))}}]),t}(P.Component),J=function(e){return{attendanceData:e.attendanceData}};t.default=(0,O.connect)(J)(B)}});